<!doctype html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>GOC Menu Diagnostics — Lite</title>
<style>
  body{font-family:Arial,Helvetica,sans-serif;margin:16px;background:#0b1220;color:#fff}
  pre{white-space:pre-wrap;background:#111a30;border:1px solid #223255;padding:12px;border-radius:8px}
  .ok{color:#8ef0b3} .bad{color:#f7b8b8} .warn{color:#f7e3b8}
</style>
<h1>GOC Menu Diagnostics — Lite (auto-run)</h1>
<p>If you see no results below after 3 seconds, JavaScript didn't run on this page (CSP/MIME/blocked). Try the LAN version or send a screenshot.</p>
<pre id="out">Running checks...</pre>
<script>
(function(){
  function w(s){ var p=document.getElementById('out'); p.textContent += "\n" + s; }
  function sel(el){ if(!el) return 'none'; var id=el.id?('#'+el.id):''; var cls=el.className?('.'+String(el.className).replace(/\s+/g,'.')):''; return el.tagName.toLowerCase()+id+cls; }
  function run(){
    var out = document.getElementById('out'); out.textContent = 'Results:';
    function $(s,r){ return (r||document).querySelector(s); }
    function $$(s,r){ return Array.prototype.slice.call((r||document).querySelectorAll(s)); }
    var toggle = $('[data-toggle-target],.ct-header-trigger,.menu-toggle,.hamburger,.nav-toggle,.ct-toggle');
    var panel  = $('.ct-panel, .ct-drawer, .offcanvas, .mobile-menu, .ct-panel--mobile, #offcanvas');
    var overlay= $('.ct-panel__backdrop, .ct-drawer-backdrop, .offcanvas-backdrop, .mobile-menu-overlay, .ct-backdrop');
    w('Toggle: ' + (toggle?'found ':'MISSING ') + sel(toggle));
    w('Panel: ' + (panel?'found ':'MISSING ') + sel(panel));
    w('Overlay: ' + (overlay?'found ':'MISSING ') + sel(overlay));
    if (overlay){
      var cs = getComputedStyle(overlay);
      w('Overlay pointer-events: ' + cs.pointerEvents);
      w('Overlay z-index: ' + cs.zIndex);
    }
    var hasCt = !!(window.ctDrawer && typeof window.ctDrawer.init==='function');
    var hasElem = !!(window.elementorFrontend && typeof window.elementorFrontend.init==='function');
    w('ctDrawer.init present: ' + hasCt);
    w('elementorFrontend.init present: ' + hasElem);

    // Synthetic toggle
    function isOpen(){
      return !!($('.is-open, .open, .ct-panel--visible, .ct-offcanvas-open, body.ct-open, body.menu-open, body.offcanvas-open'));
    }
    var before = isOpen();
    if (toggle) { try{ toggle.click(); }catch(e){} }
    var after = isOpen();
    if (overlay) { try{ overlay.click(); }catch(e){} }
    var afterClose = isOpen();
    w('Synthetic click changed state: ' + (after!==before));
    w('After open: ' + after + ' | After overlay close: ' + afterClose);

    // List .js script tags seen
    var scripts = $$('script[src]'); w('Script tags with src: ' + scripts.length);
    var misses = scripts.filter(function(s){ return s.src && s.getAttribute('src').indexOf('wp-content')>=0; });
    w('WP-related scripts referenced: ' + misses.length);
    for (var i=0;i<misses.length;i++){ w(' - ' + misses[i].getAttribute('src')); }
  }
  // Auto-run after load
  if (document.readyState === 'complete' || document.readyState === 'interactive') { setTimeout(run, 50); }
  else { window.addEventListener('DOMContentLoaded', function(){ setTimeout(run, 50); }); }
  // Safety timeout to detect no-JS
  setTimeout(function(){
    var t=document.getElementById('out').textContent;
    if (t.indexOf('Results:')===-1) document.getElementById('out').textContent += "\n(No results rendered — JS likely blocked on this page)";
  }, 3000);
})();
</script>
